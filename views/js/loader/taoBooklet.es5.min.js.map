{"version":3,"names":["loaderScript","document","getElementById","configUrl","getAttribute","bundle","loadController","controllerOptions","controllerPath","params","JSON","parse","err","window","require","controller","startController","started","start","addEventListener","readyState","loadBundles","loaded","bundles","concat","filter","item","index","indexOf","forEach","length","define","$","_","__","module","urlHelper","taskQueue","treeTaskButtonFactory","actions","binder","taskRegenerateButton","$downloader","hide","$regenerateBtn","show","replace","icon","label","render","register","actionContext","data","pick","uniqueValue","uri","classUri","setTaskConfig","taskCreationUrl","url","taskCreationData","append","on","e","preventDefault","$form","target","closest","attr","route","find","val","id","config","previewAction","getBy","state","disabled","isPreviewEnabled","updateState","$frame","$container","css","height","filterFactory","feedback","urlUtils","actionManager","Promise","taskCreationButtonFactory","refreshTree","uriResource","trigger","taskCreationButton","$oldSubmitter","type","title","prop","getTaskCreationData","serializeArray","taskReportContainer","result","task","report","isArray","children","info","taskLabel","error","errorMessage","click","replaceWith","getElement","float","hb","template","Handlebars","depth0","helpers","partials","compilerInfo","merge","stack1","helper","buffer","functionType","escapeExpression","cls","call","hash","_typeof","loggerFactory","testRunner","printTpl","showMessage","msg","printLayoutHacking","previous","threshold","pages","blankPage","$section","before","computePageFromHeight","Math","ceil","each","hasClass","outerHeight","nextUntil","extractSharedStimulus","hrefs","$include","href","$newSection","remove","logger","ready","status","testData","options","layoutOptions","layout","layoutClasses","one_page_item","one_page_section","timeout","setTimeout","$mainContainer","reduce","list","value","name","push","join","add_blank_pages","clearTimeout","hider","switchContainer","purpose","$containers","$header","$formContainer","$reportContainer","$submitter","displayReport","terminate","reset","Booklet","editBooklet","wizard","preview","Results","printWizard","taskQueueTableFactory","bookletTaskQueue","queueId","context","defaults","init","rows","dataUrl","statusUrl","removeUrl"],"sources":["/github/workspace/tao/views/build/config-wrap-start-default.js","../../loader/bootstrap.js","../controller/Booklet/editBooklet.js","../controller/Booklet/preview.js","../controller/Booklet/wizard.js","../tpl/print!tpl","../controller/PrintTest/render.js","../controller/Results/printWizard.js","../controller/routes.js","../component/taskQueue.js","module-create.js","/github/workspace/tao/views/build/config-wrap-end-default.js"],"sourcesContent":["\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2016-2018 (original work) Open Assessment Technologies SA ;\n */\n\n/**\n * Bootstrap the app, start the entry controller\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\n(function(){\n    'use strict';\n\n\n\n    var loaderScript = document.getElementById('amd-loader');\n    var configUrl = loaderScript.getAttribute('data-config');\n    var bundle  = loaderScript.getAttribute('data-bundle');\n\n    var loadController = function loadController(){\n        var controllerOptions = {};\n        var controllerPath = loaderScript.getAttribute('data-controller');\n        var params = loaderScript.getAttribute('data-params');\n        try{\n            controllerOptions = JSON.parse(params);\n        } catch(err){\n            controllerOptions = {};\n        }\n        window.require([controllerPath], function(controller) {\n            var startController = function startController(){\n                if(!window.started){\n                    window.started = true;\n                    controller.start(controllerOptions);\n                }\n            };\n            document.addEventListener('readystatechange', startController, false);\n            if (document.readyState === 'complete') {\n                startController();\n            }\n        });\n    };\n\n    //always start to load the config\n    window.require([configUrl], function() {\n\n        //define the global loading mechanism\n        if(!window.loadBundles){\n            //keep tracl of loaded bundles, even if require does it,\n            //this prevent some unecessary cycles\n            window.loaded = {};\n\n            /**\n             * Loading entry point for inter bundle dependency,\n             * always take the bundles from the params and window.bundles\n             * @param {String[]} [bundles] - an optional list of bundle to load\n             */\n            window.loadBundles = function loadBundles(bundles){\n                bundles = bundles || [];\n                bundles = bundles.concat(window.bundles)\n                bundles = bundles.filter( function(item, index){\n                    return item && bundles.indexOf(item) === index && window.loaded[item] !== true;\n                });\n                require(bundles, function(){\n                    bundles.forEach( function( item ) {\n                        window.loaded[item] = true;\n                    });\n                    loadController();\n                });\n            }\n        }\n\n        if(bundle || (window.bundles && window.bundles.length)) {\n            window.loadBundles([bundle]);\n        } else {\n            loadController();\n        }\n    });\n})();\n\ndefine(\"loader/bootstrap\", function(){});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n *\n */\ndefine('taoBooklet/controller/Booklet/editBooklet',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'module',\n    'util/url',\n    'ui/taskQueue/taskQueue',\n    'ui/taskQueueButton/treeButton',\n    'layout/actions',\n    'layout/actions/binder'\n], function (\n    $,\n    _,\n    __,\n    module,\n    urlHelper,\n    taskQueue,\n    treeTaskButtonFactory,\n    actions,\n    binder\n) {\n    'use strict';\n\n    return {\n        start() {\n\n            var $downloader = $('<iframe/>').hide();\n            var $regenerateBtn = $('#booklet-regenerate');\n            var taskRegenerateButton;\n\n            $regenerateBtn.show();\n\n            taskRegenerateButton = treeTaskButtonFactory({\n                replace : true,\n                icon : 'reset',\n                label : __('Regenerate'),\n                taskQueue : taskQueue\n            }).render($regenerateBtn);\n\n            binder.register('booklet_regenerate', function register(actionContext) {\n                var data = _.pick(actionContext, ['uri', 'classUri', 'id']);\n                var uniqueValue = data.uri || data.classUri || '';\n                taskRegenerateButton.setTaskConfig({\n                    taskCreationUrl : this.url,\n                    taskCreationData : {uri : uniqueValue}\n                }).start();\n            });\n\n            $('form').append($downloader);\n\n            $('.btn-download').on('click', function (e) {\n                e.preventDefault();\n                var $form = $(e.target).closest('form');\n\n                $downloader.attr('src', urlHelper.route('download', 'Booklet', 'taoBooklet', {\n                    uri: $form.find('input[name=\"uri\"]').val(),\n                    classUri: $form.find('input[name=\"classUri\"]').val(),\n                    id: $form.find('input[name=\"id\"]').val()\n                }));\n            });\n\n            const config = module.config();\n            const previewAction = actions.getBy('booklet-preview');\n            if (previewAction) {\n                previewAction.state.disabled = !config.isPreviewEnabled;\n                actions.updateState();\n            }\n        }\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA;\n *\n */\n\n/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoBooklet/controller/Booklet/preview',['jquery'], function ($) {\n    'use strict';\n\n    return {\n        start: function () {\n\n            //resize the frame to it's container height\n            var $frame = $('.preview-test');\n            var $container  = $frame.closest('.content-container');\n            $frame.css('min-height', ($container.height() - 50) + 'px' );\n        }\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n *\n */\ndefine('taoBooklet/controller/Booklet/wizard',[\n    'lodash',\n    'jquery',\n    'i18n',\n    'ui/filter',\n    'ui/feedback',\n    'util/url',\n    'layout/actions',\n    'core/promise',\n    'ui/taskQueue/taskQueue',\n    'ui/taskQueueButton/standardButton'\n], function (_, $, __, filterFactory, feedback, urlUtils, actionManager, Promise, taskQueue, taskCreationButtonFactory) {\n    'use strict';\n\n    /**\n     * wrapped the old jstree API used to refresh the tree and optionally select a resource\n     * @param {String} [uriResource] - the uri resource node to be selected\n     */\n    var refreshTree = function refreshTree(uriResource){\n        actionManager.trigger('refresh', {\n            uri : uriResource\n        });\n    };\n\n    return {\n        start: function () {\n            var $form = $('#form_1');\n            var $container = $form.closest('.content-block');\n            var taskCreationButton, $oldSubmitter;\n            var $regenerateBtn = $('#booklet-regenerate');\n\n            // hide regenerate on the create page\n            $regenerateBtn.hide();\n\n            //find the old submitter and replace it with the new component\n            $oldSubmitter = $form.find('.form-submitter');\n            taskCreationButton = taskCreationButtonFactory({\n                type : 'info',\n                icon : 'play',\n                title : __('Generate booklet'),\n                label : __('Generate'),\n                taskQueue : taskQueue,\n                taskCreationUrl : $form.prop('action'),\n                taskCreationData : function getTaskCreationData(){\n                    return $form.serializeArray();\n                },\n                taskReportContainer : $container\n            })\n            .on('enqueued', function () {\n                refreshTree();\n            })\n            .on('finished', function(result){\n                if (result.task\n                    && result.task.report\n                    && _.isArray(result.task.report.children)\n                    && result.task.report.children.length\n                    && result.task.report.children[0]) {\n\n                        if(result.task.report.children[0].data\n                            && result.task.report.children[0].data.uriResource){\n                            feedback().info(__('%s completed', result.task.taskLabel));\n                            refreshTree(result.task.report.children[0].data.uriResource);\n                        }else{\n                            refreshTree();\n                        }\n                } else {\n                    // move from the wizard on generated\n                    refreshTree();\n                }\n            }).on('continue', function(){\n                refreshTree();\n            }).on('error', function(err){\n                //format and display error message to user\n                feedback().error(err.errorMessage);\n                // refreshTree();\n                $('#booklet-new a').click();\n            }).render($oldSubmitter.closest('.form-toolbar'));\n\n            //replace the old submitter with the new one and apply its style\n            $oldSubmitter.replaceWith(taskCreationButton.getElement().css({float: 'right'}));\n        }\n    };\n});\n\n","\ndefine('tpl!taoBooklet/tpl/print', ['handlebars'], function(hb){ return hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<main class=\\\"tao-scope \";\n  if (helper = helpers.cls) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.cls); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"></main>\";\n  return buffer;\n  }); });\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015-2017 (original work) Open Assessment Technologies SA;\n */\n\n/**\n *\n * This controller renders a printable test in the current page.\n *\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoBooklet/controller/PrintTest/render',[\n    'jquery',\n    'lodash',\n    'core/logger',\n    'taoQtiPrint/runner/testRunner',\n    'tpl!taoBooklet/tpl/print'\n], function ($, _, loggerFactory, testRunner, printTpl) {\n    'use strict';\n\n    var logger = loggerFactory('printTest/render');\n\n    /**\n     * Old school way to debug document, especially when generated in PDF.\n     * It appends the message to the body.\n     * @param {String} msg - the content to display\n     * @param {String} type - the type of message\n     */\n    function showMessage(msg, type) {\n        type = type || 'info';\n        $('body').append(`<div class=\"feedback-${type}\">${msg}</div>`);\n    }\n\n    /**\n     * Hack the current layout to match arbitrary rules\n     * @param {JQuery} $container\n     */\n    function printLayoutHacking($container) {\n\n        var threshold = 6000;   //this height seems to work - value is empirical and linked to the A4 page layout with 300 DPI\n        var pages = 2;          //start on page 2\n        var previous;           //keep a ref to the previous section\n\n        //add a blank page\n        var blankPage = function blankPage($section) {\n            $section.before('<div class=\"breaker\"></div>');\n            pages++;\n        };\n\n        //add pages based on the given height\n        var computePageFromHeight = function computePageFromHeight(height) {\n            if (height > threshold) {\n                pages += Math.ceil(height / threshold) - 1;\n            }\n        };\n\n        //browse direct section add apply the odd/even rules for section and items\n        $container.children('section').each(function () {\n            var $section = $(this);\n            var height;\n\n            if ($section.hasClass('section')) {\n\n                if (pages % 2 === 0) {\n                    blankPage($section);\n                }\n\n                computePageFromHeight($section.outerHeight());\n\n                previous = 'section';\n                pages++;\n            }\n            if ($section.hasClass('item')) {\n                if (previous !== 'item') {\n\n                    if (pages % 2 !== 0) {\n                        blankPage($section);\n                    }\n\n                    height = $section.outerHeight();\n                    $section.nextUntil('.section', '.item').each(function () {\n                        height += $(this).outerHeight();\n                    });\n                    computePageFromHeight(height);\n\n                    pages++;\n                }\n                previous = 'item';\n            }\n        });\n    }\n\n    /**\n     * Extract shared stimulus from a item, put it in section before a item\n     * Remove repeated shared stimulus\n     * @param {JQuery} $container\n     */\n    function extractSharedStimulus($container) {\n        const hrefs = {};\n        // find shared stimulus\n        $container.find('.qti-include').each(function () {\n            const $include = $(this);\n            const href = $include.attr('data-href');\n            if (!hrefs[href]) {\n                hrefs[href] = true;\n                const $section = $include.closest('section.item');\n                // move shared stimulus in section before item\n                const $newSection = $('<section class=\"grid-row include\"></section>');\n                $newSection.append($include);\n                $section.before($newSection);\n            } else {\n                // each shared stimulus is included only once\n                $include.remove();\n            }\n        });\n    }\n\n    /**\n     * The renderer controller\n     * @exports taoBooklet/controller/printTest/render\n     */\n    return {\n\n        /**\n         * Controller entry point\n         * @param {Object} config\n         */\n        start: function start(config) {\n            var testData = config.testData;\n            var options = config.options;\n            var layoutOptions = options && options.layout || {};\n            var layoutClasses = {\n                'one_page_item': 'one-item-per-page',\n                'one_page_section': 'one-section-per-page'\n            };\n\n            //this is just in case something went wrong, but we weren't able to catch it.\n            var timeout = setTimeout(function () {\n                showMessage(\"Something went wrong...\", 'error');\n                ready();\n            }, 45 * 1000);\n\n            //the content will be inserted in a detached element (to save time)\n            var $mainContainer = $(printTpl({\n                cls: _.reduce(layoutOptions, function (list, value, name) {\n                    if (value && layoutClasses[name]) {\n                        list.push(layoutClasses[name]);\n                    }\n                    return list;\n                }, []).join(' ')\n            }));\n\n            /**\n             * As the page can be called by an external tool and\n             * as we build the page in JS asynchronously, we need this hack\n             * to tell the 3rd part tool that the page is ready.\n             */\n            function ready() {\n                window.status = 'DONE';\n            }\n\n            //we attach the container to the DOM\n            $('body').append($mainContainer);\n\n            //instantiate the TestRunner\n            testRunner(testData, options)\n                .on('error', function (e) {\n                    logger.error(e);\n                    showMessage(e, 'error');\n                    ready();\n                })\n                .on('ready', function () {\n\n                    //hack layout calculation\n                    if (layoutOptions['add_blank_pages']) {\n                        printLayoutHacking($mainContainer);\n                    }\n\n                    extractSharedStimulus($mainContainer);\n\n                    clearTimeout(timeout);\n\n                    //we are done\n                    ready();\n                })\n                .render($mainContainer);\n        }\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2017 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n *\n */\ndefine('taoBooklet/controller/Results/printWizard',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'ui/hider',\n    'util/url',\n    'ui/feedback',\n    'layout/actions/binder',\n    'ui/taskQueue/taskQueue',\n    'ui/taskQueueButton/standardButton'\n], function ($, _, __, hider, urlHelper, feedback, binder, taskQueue, taskCreationButtonFactory) {\n    'use strict';\n\n    return {\n        start: function () {\n            var $header = $('header.section-header');\n            var $formContainer = $('.print-form');\n            var $reportContainer = $('.print-report');\n            var $form = $('form', $formContainer);\n            var $submitter = $('.form-submitter', $form);\n            var $containers = $('.main-container');\n            var taskCreationButton;\n\n            function switchContainer(purpose) {\n                hider.hide($containers);\n                hider.show($containers.filter('[data-purpose=\"' + purpose + '\"]'));\n            }\n\n            function refreshTree() {\n                $('.tree').trigger('refresh.taotree', [{\n                    uri : $header.data('select-node')\n                }]);\n            }\n\n            switchContainer('form');\n            taskCreationButton = taskCreationButtonFactory({\n                type : 'info',\n                icon : 'play',\n                title : __('Generate Results'),\n                label : __('Generate'),\n                taskQueue : taskQueue,\n                taskCreationUrl : $form.prop('action'),\n                taskCreationData : function getTaskCreationData(){\n                    return $form.serializeArray();\n                },\n                taskReportContainer : $reportContainer\n            }).on('finished', function(result){\n                if (result.task\n                    && result.task.report\n                    && _.isArray(result.task.report.children)\n                    && result.task.report.children.length\n                    && result.task.report.children[0]) {\n                    if(result.task.report.children[0].data\n                        && result.task.report.children[0].data.uriResource){\n                        feedback().info(__('%s completed', result.task.taskLabel));\n                        refreshTree(result.task.report.children[0].data.uriResource);\n                    }else{\n                        this.displayReport(result.task.report.children[0], __('Error'));\n                        switchContainer('report');\n                    }\n                }\n            }).on('continue', function(){\n                refreshTree();\n            }).on('error', function(err){\n                //format and display error message to user\n                // feedback().error(err);\n                taskCreationButton.terminate().reset();\n                this.displayReport(err, __('Error'));\n                switchContainer('report');\n            }).on('enqueued', function(){\n                refreshTree();\n            }).render($submitter.closest('.form-toolbar'));\n\n            //replace the old submitter with the new one and apply its style\n            $submitter.replaceWith(taskCreationButton.getElement().css({float: 'right'}));\n        }\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n *\n *\n */\n\n//@see http://forge.taotesting.com/projects/tao/wiki/Front_js\ndefine('taoBooklet/controller/routes',[],function () {\n    'use strict';\n\n    return {\n        'Booklet': {\n            'actions': {\n                'editBooklet' : 'controller/Booklet/editBooklet',\n                'wizard'      : 'controller/Booklet/wizard',\n                'preview'     : 'controller/Booklet/preview'\n            }\n        },\n        'Results': {\n            'actions': {\n                'printWizard' : 'controller/Results/printWizard'\n            }\n        }\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2017 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sébastien Conan <jean-sebastien@taotesting.com>\n */\ndefine('taoBooklet/component/taskQueue',[\n    'jquery',\n    'lodash',\n    'util/url',\n    'ui/taskQueue/table'\n], function ($, _, urlHelper, taskQueueTableFactory) {\n    'use strict';\n\n    var defaults = {\n        rows: 10,\n        dataUrl: urlHelper.route('getTasks', 'TaskQueueData', 'taoBooklet'),\n        statusUrl: urlHelper.route('getStatus', 'TaskQueueData', 'taoBooklet'),\n        removeUrl: urlHelper.route('archiveTask', 'TaskQueueData', 'taoBooklet')\n    };\n\n    /**\n     * Renders a booklet task queue table component\n     * @param {String} queueId\n     * @param {jQuery} $container\n     * @param {Object} [config]\n     * @returns {taskQueueTable}\n     */\n    function bookletTaskQueue(queueId, $container, config) {\n        var taskQueue = taskQueueTableFactory(_.merge({context: queueId}, config || {}, defaults));\n\n        taskQueue.init()\n            .render($container);\n\n        return taskQueue;\n    }\n\n    return bookletTaskQueue;\n});\n\n","\ndefine(\"taoBooklet/loader/taoBooklet.es5.bundle\", function(){});\n","window.bundles = (window.bundles || []).concat([\"taoQtiPrint/loader/taoQtiPrint.es5.min\",\"taoItems/loader/taoItemsRunner.es5.min\",\"taoQtiItem/loader/taoQtiItemRunner.es5.min\"]);\n"],"mappings":"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"}